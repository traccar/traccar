#!/usr/bin/env python3

import urllib
import http.client as httplib
import time
import datetime

id = '12345678901234'
server = 'localhost:5055'

points = [
    ("2025-02-02 20:11:14",43.68683,-79.607168,2.69978,97),
("2025-02-02 20:11:17",43.686796,-79.607085,5.93953,136),
("2025-02-02 20:11:18",43.686725,-79.607055,11.3391,184),
("2025-02-02 20:11:19",43.686725,-79.607055,11.3391,184),
("2025-02-02 20:11:19",43.686665,-79.607056,12.959,178),
("2025-02-02 20:11:31",43.685575,-79.607035,20.5184,195),
("2025-02-02 20:11:41",43.684606,-79.607565,21.5983,200),
("2025-02-02 20:11:51",43.683786,-79.607761,12.959,143),
("2025-02-02 20:11:52",43.683786,-79.607761,12.959,143),
("2025-02-02 20:11:53",43.683745,-79.607695,13.4989,126),
("2025-02-02 20:11:53",43.683715,-79.607608,15.6588,109),
("2025-02-02 20:11:54",43.683715,-79.607608,15.6588,109),
("2025-02-02 20:11:56",43.683676,-79.607228,22.6782,96),
("2025-02-02 20:12:03",43.68364,-79.606036,23.7581,87),
("2025-02-02 20:12:10",43.683626,-79.605266,13.4989,123),
("2025-02-02 20:12:14",43.683481,-79.60495,15.1188,94),
("2025-02-02 20:12:16",43.683495,-79.604848,16.7387,71),
("2025-02-02 20:12:17",43.683593,-79.604653,18.3585,45),
("2025-02-02 20:12:27",43.684176,-79.603513,24.838,55),
("2025-02-02 20:12:37",43.68481,-79.602336,22.1382,45),
("2025-02-02 20:12:39",43.684886,-79.602238,22.6782,40),
("2025-02-02 20:12:41",43.685141,-79.602018,21.0583,13),
("2025-02-02 20:12:43",43.685245,-79.602003,22.1382,358),
("2025-02-02 20:12:47",43.685665,-79.602211,25.378,322),
("2025-02-02 20:12:47",43.685753,-79.602321,25.9179,315),
("2025-02-02 20:12:51",43.685928,-79.60277,27.5378,284),
("2025-02-02 20:12:53",43.685951,-79.603146,29.6976,267),
("2025-02-02 20:12:55",43.685895,-79.60374,31.8575,261),
("2025-02-02 20:13:01",43.685761,-79.604736,30.7775,254),
("2025-02-02 20:13:03",43.685646,-79.605318,30.7775,256),
("2025-02-02 20:13:11",43.685495,-79.60688,29.6976,266),
("2025-02-02 20:13:19",43.685498,-79.608365,30.2376,276),
("2025-02-02 20:13:27",43.685638,-79.609863,29.1577,280),
("2025-02-02 20:13:33",43.685798,-79.610838,31.8575,285),
("2025-02-02 20:13:35",43.685931,-79.611435,32.3974,288),
("2025-02-02 20:13:43",43.686345,-79.612958,30.7775,294),
("2025-02-02 20:13:51",43.686645,-79.614415,27.5378,266),
("2025-02-02 20:13:51",43.686645,-79.614415,27.5378,266),
("2025-02-02 20:13:53",43.686631,-79.614593,28.0778,262),
("2025-02-02 20:13:55",43.686573,-79.614951,28.6177,253),
("2025-02-02 20:13:57",43.686411,-79.615458,29.6976,235),
("2025-02-02 20:13:59",43.686225,-79.615761,31.3175,222),
("2025-02-02 20:14:00",43.686225,-79.615761,31.3175,222),
("2025-02-02 20:14:05",43.685593,-79.61622,29.6976,191),
("2025-02-02 20:14:07",43.685178,-79.616248,29.6976,174),
("2025-02-02 20:14:09",43.684908,-79.616178,29.6976,163),
("2025-02-02 20:14:11",43.684775,-79.616118,30.2376,159),
("2025-02-02 20:14:15",43.684205,-79.61562,29.1577,140),
("2025-02-02 20:14:23",43.683431,-79.614628,27.5378,136),
("2025-02-02 20:14:31",43.682726,-79.613701,25.378,136),
("2025-02-02 20:14:41",43.681951,-79.612656,22.6782,126),
("2025-02-02 20:14:42",43.681951,-79.612656,22.6782,126),
("2025-02-02 20:14:50",43.681673,-79.611495,24.838,90),
("2025-02-02 20:14:50",43.681681,-79.611335,24.838,83),
("2025-02-02 20:14:51",43.681698,-79.611175,25.378,79),
("2025-02-02 20:14:53",43.681728,-79.611015,25.378,73),
("2025-02-02 20:14:57",43.681938,-79.610425,24.838,53),
("2025-02-02 20:14:59",43.682185,-79.610053,27.5378,39),
("2025-02-02 20:14:59",43.682185,-79.610053,27.5378,39),
("2025-02-02 20:15:03",43.682655,-79.609711,30.2376,17),
("2025-02-02 20:15:04",43.682655,-79.609711,30.2376,17),
("2025-02-02 20:15:07",43.683221,-79.609628,30.7775,355),
("2025-02-02 20:15:07",43.683221,-79.609628,30.7775,355),
("2025-02-02 20:15:10",43.683513,-79.609705,32.3974,343),
("2025-02-02 20:15:11",43.683801,-79.609853,32.9374,332),
("2025-02-02 20:15:13",43.684058,-79.610076,32.3974,325),
("2025-02-02 20:15:21",43.684998,-79.61109,31.8575,321),
("2025-02-02 20:15:29",43.685963,-79.612096,33.4773,330),
("2025-02-02 20:15:35",43.686876,-79.61252,34.5572,351),
("2025-02-02 20:15:41",43.687901,-79.612483,38.3369,6),
("2025-02-02 20:15:47",43.689011,-79.612295,41.0367,8),
("2025-02-02 20:15:53",43.689946,-79.612078,40.4968,9),
("2025-02-02 20:15:53",43.690133,-79.612036,40.4968,9),
("2025-02-02 20:15:59",43.691208,-79.61176,37.257,12),
("2025-02-02 20:16:05",43.69224,-79.611448,38.8769,11),
("2025-02-02 20:16:09",43.69276,-79.611288,35.6372,14),
("2025-02-02 20:16:11",43.693201,-79.611111,29.6976,17),
("2025-02-02 20:16:18",43.693848,-79.610893,15.1188,338),
("2025-02-02 20:16:19",43.693848,-79.610893,15.1188,338),
("2025-02-02 20:16:21",43.694011,-79.611075,13.4989,297),
("2025-02-02 20:16:22",43.694011,-79.611075,13.4989,297),
("2025-02-02 20:16:23",43.694016,-79.61126,15.1188,254),
("2025-02-02 20:16:24",43.694016,-79.61126,15.1188,254),
("2025-02-02 20:16:26",43.693926,-79.611423,17.8186,216),
("2025-02-02 20:16:33",43.69299,-79.611741,30.7775,190),
("2025-02-02 20:16:39",43.692066,-79.611996,35.0972,190),
("2025-02-02 20:16:45",43.691053,-79.612223,37.797,189),
("2025-02-02 20:16:51",43.690028,-79.612533,35.6372,195),
("2025-02-02 20:16:53",43.689868,-79.612598,34.5572,196),
("2025-02-02 20:16:57",43.689121,-79.612955,32.3974,197),
("2025-02-02 20:17:05",43.688005,-79.613351,29.1577,186),
("2025-02-02 20:17:06",43.688005,-79.613351,29.1577,186),
("2025-02-02 20:17:13",43.686925,-79.61361,29.1577,204),
("2025-02-02 20:17:17",43.68645,-79.613993,29.6976,221),
("2025-02-02 20:17:18",43.68645,-79.613993,29.6976,221),
("2025-02-02 20:17:21",43.686301,-79.614508,26.4579,255),
("2025-02-02 20:17:21",43.686298,-79.614668,24.838,262),
("2025-02-02 20:17:24",43.686321,-79.615158,24.838,280),
("2025-02-02 20:17:28",43.686433,-79.615646,27.5378,292),
("2025-02-02 20:17:29",43.686545,-79.615965,26.4579,294),
("2025-02-02 20:17:37",43.686956,-79.617321,29.1577,292),
("2025-02-02 20:17:45",43.687416,-79.618688,27.5378,295),
("2025-02-02 20:17:53",43.687876,-79.619935,25.378,296),
("2025-02-02 20:17:54",43.687876,-79.619935,25.378,296),
("2025-02-02 20:17:59",43.688125,-79.62084,24.2981,270),
("2025-02-02 20:18:01",43.688111,-79.620986,22.6782,254),
("2025-02-02 20:18:01",43.688068,-79.621116,22.1382,239),
("2025-02-02 20:18:04",43.687938,-79.621318,20.5184,220),
("2025-02-02 20:18:07",43.687683,-79.621475,19.4385,188),
("2025-02-02 20:18:11",43.687243,-79.621376,17.8186,161),
("2025-02-02 20:18:14",43.687088,-79.6213,16.7387,158),
("2025-02-02 20:18:25",43.686333,-79.620631,16.7387,135),
("2025-02-02 20:18:29",43.686173,-79.62039,16.1987,128),
("2025-02-02 20:18:39",43.685758,-79.619465,13.4989,115),
("2025-02-02 20:18:48",43.685603,-79.6188,17.2786,97),
("2025-02-02 20:18:51",43.685593,-79.618253,23.7581,87),
("2025-02-02 20:18:54",43.68561,-79.617938,25.378,84),
("2025-02-02 20:18:59",43.685681,-79.616895,28.6177,86),
("2025-02-02 20:19:03",43.685646,-79.61618,27.5378,108),
("2025-02-02 20:19:07",43.685446,-79.615576,25.378,116),
("2025-02-02 20:19:15",43.68502,-79.614436,25.378,115),
("2025-02-02 20:19:21",43.684861,-79.61349,25.9179,87),
("2025-02-02 20:19:23",43.684873,-79.613156,25.9179,86),
("2025-02-02 20:19:31",43.684911,-79.611768,26.9979,87),
("2025-02-02 20:19:39",43.68499,-79.610368,26.4579,79),
("2025-02-02 20:19:47",43.685065,-79.608985,28.6177,91),
("2025-02-02 20:19:54",43.684971,-79.607893,27.5378,99),
("2025-02-02 20:19:55",43.684935,-79.607546,26.9979,97),
("2025-02-02 20:20:05",43.684825,-79.606038,20.5184,99),
("2025-02-02 20:20:07",43.684771,-79.605788,19.4385,119),
("2025-02-02 20:20:09",43.684723,-79.605693,16.7387,131),
("2025-02-02 20:20:11",43.684608,-79.605591,14.0389,165),
("2025-02-02 20:20:19",43.68404,-79.605448,11.3391,170),
("2025-02-02 20:20:21",43.683933,-79.60546,10.7991,200),
("2025-02-02 20:20:22",43.683933,-79.60546,10.7991,200),
("2025-02-02 20:20:25",43.683821,-79.60556,8.09935,232),
("2025-02-02 20:20:25",43.683803,-79.605616,10.2592,253),
("2025-02-02 20:20:28",43.68378,-79.605795,16.1987,265),
("2025-02-02 20:20:35",43.683801,-79.606641,10.7991,271),
("2025-02-02 20:20:48",43.683858,-79.607615,12.419,306),
("2025-02-02 20:20:48",43.683911,-79.607658,14.0389,342),
("2025-02-02 20:20:49",43.683911,-79.607658,14.0389,342),
("2025-02-02 20:20:51",43.684076,-79.607646,19.4385,13),
("2025-02-02 20:20:51",43.684171,-79.607613,20.5184,15),
("2025-02-02 20:20:54",43.68437,-79.60752,23.2182,19),
("2025-02-02 20:21:01",43.685213,-79.607055,21.5983,21),
("2025-02-02 20:21:12",43.685705,-79.606796,3.23974,228),
("2025-02-02 20:21:19",43.68558,-79.606888,2.69978,191),
("2025-02-02 20:21:40",43.685565,-79.606836,2.69978,44),
("2025-02-02 20:21:41",43.685645,-79.606808,11.3391,2),
("2025-02-02 20:21:41",43.685645,-79.606808,11.3391,2),
("2025-02-02 20:21:42",43.685645,-79.606808,11.3391,2),
("2025-02-02 20:21:43",43.685785,-79.606816,15.6588,354),
("2025-02-02 20:21:54",43.686516,-79.606951,7.01944,356),
("2025-02-02 20:21:59",43.686651,-79.606983,7.5594,330),
("2025-02-02 20:22:01",43.686745,-79.60711,7.5594,292),
("2025-02-02 20:22:02",43.686745,-79.60711,7.5594,292),
("2025-02-02 20:22:07",43.686768,-79.60738,7.01944,258),
("2025-02-02 20:22:12",43.686775,-79.607585,5.39957,313),
("2025-02-02 20:22:15",43.686828,-79.607625,5.93953,353),
("2025-02-02 20:22:19",43.686935,-79.607695,4.31966,295),
("2025-02-02 20:23:44",43.687003,-79.607828,4.85961,240),
("2025-02-02 20:23:46",43.686973,-79.607873,3.7797,200),
("2025-02-02 20:23:48",43.686946,-79.607861,3.7797,134),
("2025-02-02 20:23:49",43.686935,-79.607788,8.09935,68),
("2025-02-02 20:23:50",43.686935,-79.607788,8.09935,68),
("2025-02-02 20:23:51",43.686938,-79.60775,5.39957,102),
("2025-02-02 20:23:53",43.686903,-79.607663,5.39957,162),
("2025-02-02 20:23:54",43.686903,-79.607663,5.39957,162),
("2025-02-02 20:23:55",43.686873,-79.60766,7.5594,181),
("2025-02-02 20:24:01",43.686808,-79.607635,5.93953,129),
("2025-02-02 20:24:01",43.686793,-79.607586,9.71923,107),
("2025-02-02 20:24:01",43.686793,-79.607586,9.71923,107),
("2025-02-02 20:24:03",43.686788,-79.607518,11.3391,93),
]

def send(conn, time, lat, lon, speed, heading):
    params = (('id', id), ('timestamp', int(time)), ('lat', lat), ('lon', lon), ('speed', speed), ('heading', heading))
    conn.request('POST', '?' + urllib.parse.urlencode(params))
    conn.getresponse().read()

conn = httplib.HTTPConnection(server)

for i in range(0, len(points)):
    (moment,lat, lon, speed,heading) = points[i]
    (momentOld,latOld, lonOld, speedOld,headingOld) = points[i-1]

    time_dif = time.mktime(datetime.datetime.strptime(moment, "%Y-%m-%d %H:%M:%S").timetuple()) - time.mktime(datetime.datetime.strptime(momentOld, "%Y-%m-%d %H:%M:%S").timetuple())

    if i-1 >= 0:
        time.sleep(2)

    #send(conn, time.mktime(datetime.datetime.strptime(moment, "%Y-%m-%d %H:%M:%S").timetuple()), lat, lon, speed)
#    print("sending ", time.mktime(time.localtime(time.time())), lat, lon, speed)
    send(conn, time.mktime(time.localtime(time.time())), lat, lon, speed,heading)

